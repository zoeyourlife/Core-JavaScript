## 실행컨텍스트

- 실행할 코드에 제공할 환경 정보들을 모아놓은 객체

  - 동일한 환경에 있는 코드들을 실행할 때 필요한 정보들을 모아 구성된 컨텍스트
  - 동적인 자바스크립트의 특성을 잘 보여주는 개념

- 각 컨택스트들은 콜스택에 쌓이며, 최근 컨텍스트부터 실행된다.

  - 가장 먼저 생성되는 전역 컨텍스트부터 콜스택에 쌓이며,
    엔진이 코드를 읽으며 구성되는 컨택스트들이 순차적으로 쌓이게 된다.

- 실행 컨택스트에 담기는 정보는 다음과 같다
  - Variable Environment
  - Lexical Environment
  - ThisBinding

### 1. Variable Environment

- 실행 컨텍스트가 생성될 때 식별자들의 정보나 외부 환경 정보를 담는다.
- 최초 상태의 스냅샷을 유지하며 변경사항이 반영되지 않는다.

### 2. Lexical Environment

- **Variable Environment**의 복사본으로 처음에는 이와 담기는 내용이 같지만, 변경 사항이 실시간으로 반영된다.

### 3. ThisBinding

- this로 지정된 객체가 저장된다. this가 지정되지 않은 경우 전역 객체가 저장된다.

<br>

## 호이스팅

- **Lexical Environment** 정보수집과정에서 발생하는 현상

  - **Lexical Environment**에는 EnvironmentRecord라는 정보가 수집된다.
    컨택스트가 실행되기 전, 해당 영역에는 현재 컨텍스트와 관련된 코드 식별자 정보들이 순서대로 담겨진다. 따라서 코드가 실행되기도 전에 자바스크립트 엔진은 컨텍스트에 관련한 식별자를 모두 파악하게되며, 변수들이 컨텍스트 최상단에 끌어올려진듯한 효과를 갖는다. 이를 **호이스팅**이라 한다.

  - 변수는 식별자 정보만 호이스팅되며, 해당 식별자에 할당된 데이터는 호이스팅되지 않는다. 해당 데이터는 코드가 실행되며 해당 할당부에 도달했을 때 할당된다. 그 전까지 해당 변수는 값이 할당되기 전이기에 **undefined**값을 갖는다.

<br>

## 함수 호이스팅

### 1. 함수표현식

```javaScript
let a = function() {
console.log('hello');
}
```

보는 바와 같이 함수 표현식은 'a'라는 변수를 선언하고, 해당 변수에 '함수내용'이라는 데이터를 할당하는 방식이다. 따라서 해당 함수가 호이스팅될 때 할당값인 '함수내용'은 호이스팅되지 않는다.

### 2. 함수선언문

```javaScript
function a() {
  console.log('hello');
}
```

함수표현식과 달리, 함수선언문은 할당부가 없으며 함수 식별자의 선언과 동시에 '함수내용'까지 함께 선언된다. 따라서 모든 값이 호이스팅된다.

<br>

## 스코프 & 스코프체인

### 1. 스코프

- 식별자(변수)에 대한 유효범위이다.
  - 변수 사용 및 효과가 유효한 범위를 뜻한다.

### 2. 스코프 체인

- 엔진이 식별자의 유효범위를 안에서부터 바깥으로 차례로 검색해나가는 것을 뜻한다.

- 이는 **Lexical Environment**의 두 번째 수집자료인 **outerEnvironmentReference**에 의해 가능하다.

- **outerEnvironmentReference**는 현재 함수가 선언될 당시의 **Lexical Environment**를 참조한다. 이러한 참조를 안에서부터 바깥으로 진행해가며 식별자의 유효범위를 탐색해나간다.

- 만약 동일한 이름의 식별자가 현재 컨텍스트의 유효범위 안에 있을 때는, 스코프 체인 상 가장 먼저 발견된 식별자만 접근 가능하다. 스코프 체인은 안에서 바깥으로 탐색하기 때문이다.
  - 이러한 특성은 **정보 은닉화**로도 연결된다. 해당 특성을 사용하여 바깥 공간에 있는 동일명의 식별자 정보를 내부 공간에서 접근할 수 없도록 할 수 있다.
